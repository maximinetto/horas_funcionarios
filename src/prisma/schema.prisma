// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("OFFICIALS_SCHEDULES_DB_URL")
}

model Official {
  id                 Int                   @id @default(autoincrement())
  recordNumber       Int                   @unique @map("record_number")
  firstName          String                @db.VarChar(255) @map("first_name")
  lastName           String                @db.VarChar(255) @map("last_name")
  position           String                @db.VarChar(255)
  contract           Contract
  type               TypeOfOfficials
  dateOfEntry        DateTime              @db.Date @map("date_of_entry")
  chargeNumber       Int                   @map("charge_number")
  balanceTAS         HourlyBalanceTAS?
  balanceTeacher     HourlyBalanceTeacher?
  calculation Calculation[]
 
  @@map("officials")
}

model HourlyBalanceTAS {
  id         String   @id @default(uuid())
  year       Int
  yearBalance Int     @map("year_balance")
  working    BigInt
  nonWorking BigInt      @map("non_working")
  simple     BigInt
  officialId Int      @unique @map("official_id")
  official   Official @relation(fields: [officialId], references: [id])

  @@map("hourly_balance_tas")
}

model HourlyBalanceTeacher {
  id         String   @id @default(uuid())
  year       Int
  yearBalance Int     @map("year_balance")
  balance    BigInt
  officialId Int      @unique @map("official_id")
  official   Official @relation(fields: [officialId], references: [id])

  @@map("hourly_balance_teacher")
}

model Calculation {
  id           String   @id @default(uuid())
  year         Int
  month        Month
  officialId   Int      @map("official_id")
  official     Official @relation(fields: [officialId], references: [id])
  observations String?  @db.Text
  calculationTAS CalculationTAS?
  calculationTeacher CalculationTeacher?

  @@map("calculation")
}

model CalculationTAS {
  id                       String      @id @default(uuid())
  surplusBusiness          BigInt         @map("surplus_business")
  surplusNonWorking        BigInt         @map("surplus_non_working")
  surplusSimple            BigInt         @map("surplus_simple")
  discount                 BigInt
  workingOvertime          BigInt         @map("working_overtime")
  workingNightOvertime     BigInt         @map("working_night_overtime")
  nonWorkingOvertime       BigInt         @map("non_working_overtime")
  nonWorkingNightOvertime  BigInt         @map("non_working_night_overtime")
  compensatedNightOvertime BigInt         @map("compensated_night_overtime")
  calculationId            String       @unique @map("calculation_id")
  calculation              Calculation  @relation(fields: [calculationId], references: [id])

  @@map("calculation_tas")
}

model CalculationTeacher {
  id           String   @id @default(uuid())
  surplus      BigInt
  discount     BigInt
  calculationId            String       @unique @map("calculation_id")
  calculation              Calculation  @relation(fields: [calculationId], references: [id])
  
  @@map("calculation_teacher")
}

enum Contract {
  PERMANENT
  TEMPORARY
}

enum TypeOfOfficials {
  TEACHER
  NOT_TEACHER
}

enum Month {
  JANUARY
  FEBRUARY
  MARCH
  APRIL
  MAY
  JUNE
  JULY
  AUGUST
  SEPTEMBER
  OCTOBER
  NOVEMBER
  DECEMBER
}
